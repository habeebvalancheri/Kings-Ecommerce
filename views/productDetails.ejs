<%- include('include/header') %>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/drift-zoom/1.3.1/Drift.min.js"
    integrity="sha512-Pd9pNKoNtEB70QRXTvNWLO5kqcL9zK88R4SIvThaMcQRC3g8ilKFNQawEr+PSyMtf/JTjV7pbFOFnkVdr0zKvw=="
    crossorigin="anonymous"></script>
  
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/extjs/6.7.0/ext-all.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/drift-zoom/1.3.1/Drift.min.js"></script>
<style>
  @media (max-width: 768px) {
    #searchBar {
      width: 100%;
      padding: 8px; /* Adjust the padding as needed */
    }
  }

  @media (max-width: 900px) {
    #searchBar {
      width: 100%;
      padding: 8px;
    }

    #searchBar input {
      font-size: 14px;
      width: 70%; /* Adjust the input width */
    }

    #searchBar button {
      width: 30%; /* Adjust the button width */
      margin-top: 8px; /* Add some spacing between input and button */
    }
  }

  @media (max-width: 320px) {
    /* Additional styles for screens with a width of 320px or less (e.g., iPhone SE) */
    #searchBar input {
      width: 60%; /* Adjust the input width for smaller screens */
    }

    #searchBar button {
      width: 40%; /* Adjust the button width for smaller screens */
    }
  }
</style>

  <title>product-details 
  </title>

  <!-- content -->
  <section class="py-5">
    <div class="container">
      <div class="row gx-5">
        <aside class="col-lg-6">
<!-- Large Image Container -->
<div id="largeImageContainer" class="rounded-4 mb-3 d-flex justify-content-center imageHo">
  <a id="largeImageLink" data-fslightbox="mygalley" class="rounded-4" data-type="image" href="/images/<%= products.pImages[0] %>">
    <img id="largeImage" style="max-width: auto; max-height: auto; margin: auto; height: 350px;"
      class="rounded-4 fit" src="/images/<%= products.pImages[0] %>"
      data-magnify-src="/images/<%= products.pImages[0] %>" />
  </a>
</div>

<!-- Thumbnail Images with Added Gap -->
<div class="d-flex justify-content-center mb-3">
  <% for (let i = 0; i < Math.min(4, products.pImages.length); i++) { %>
    <a data-fslightbox="mygalley" class="border mx-2 rounded-2 thumbnail-link" data-type="image" data-index="<%= i %>"
      href="/images/<%= products.pImages[i] %>">
      <img width="60" height="60" class="rounded-2" src="/images/<%= products.pImages[i] %>" />
    </a>
  <% } %>
</div>
          <!-- thumbs-wrap.// -->
          <!-- gallery-wrap .end// -->
        </aside>
        <main class="col-lg-6">
          <div class="ps-lg-3">
            <h4 class="title text-dark">
              <%= products.pName  %>
            </h4>
            <div class="d-flex flex-row my-3">
              <div class="text-warning mb-1 me-2">
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
                <span class="ms-1">
                  4.5
                </span>
              </div>
              <span class="text-muted"><i class="fas fa-shopping-basket fa-sm mx-1"></i>
                <%= products.stock  %>
              </span>
              <span class="text-success ms-2">In stock</span>
            </div>
            
            <div class="mb-3">
              <span class="h5">
                ₹<%= products.price.toLocaleString('en-IN')  %> 
              </span>
              <span class="text-muted"></span>
            </div>

            <p class="product-name">
              <%= products.description  %>
            </p>
            <hr />

            <div class="row mb-4">
              <!-- <div class="col-md-4 col-6">
                <label class="mb-2">Clothing Type</label>
                <select id="clothingType" class="form-select border border-secondary" style="height: 35px;">
                  <option value="pants">Pants</option>
                  <option value="fullSuits">Full Suits</option>
                </select>
              </div> -->
              <!-- col.// -->
            
              <div class="col-md-4 col-6">
                <label class="mb-2">Size</label>
                <select id="sizeSelect" class="form-select border border-secondary" style="height: 35px;">
                  <!-- Default size options for pants -->
                  <option value="36/XS">36/XS</option>
                  <option value="38/S">38/S</option>
                  <option value="40/M">40/M</option>
                  <option value="42/L">42/L</option>
                  <option value="44/L">44/L</option>
                  <option value="46/XL">46/XL</option>
                  <option value="50/XXL">50/XXL</option>
                  <option value="53/3XL">53/3XL</option>
                </select>
              </div>
              <!-- col.// -->
            </div>
            
            <!-- <% if(users) { %> -->
              <!-- User is logged in, show the Buy Now form -->
              <!-- <form action="/addToCart" method="POST" class="mb-3">
                <input type="hidden" name="totalsum" value="" hidden>
                <button type="submit" class="btn shadow-0"
                  style="background-color: #FFA530; color: #131921; font-weight: bolder; border-radius: 30px; height: 40px;"
                  data-bs-toggle="modal" data-bs-target="#loginModal">
                  Buy Now
                </button>
              </form> -->
             <!-- <% }else{ %> -->
                <!-- User is not logged in, show the Buy Now button with a centered modal -->
                <!-- <button type="button" class="btn shadow-0"
                  style="background-color: #FFA530; color: #131921; font-weight: bolder; border-radius: 30px; height: 40px;"
                  data-bs-toggle="modal" data-bs-target="#loginModal">
                  Buy Now
                </button> -->
                <!-- <% } %> -->
                <!-- Modal -->
                <!-- <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel"
                  aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="loginModalLabel">Login Required</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body" style="display: flex; justify-content: center;">
                        <p>Please log in to get the Access</p> -->
                        <!-- You can add more information or instructions here -->
                      <!-- </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                          style="color:white; background-color: #131921">Close</button>
                        <a href="/login"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                            style="color: #131921; background-color: #FFA530;">Login</button></a> -->
                        <!-- You can add additional buttons or actions here -->
                      <!-- </div>
                    </div>
                  </div>
                </div>
                -->
                  <!-- Bootstrap JS (Make sure to include this if not included already) -->
                  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
                    integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
                    crossorigin="anonymous"></script>


                 <% if(users) {%>
                    <!-- User is logged in, show the Buy Now form -->
                    <a href="#" class="btn add-to-cart-btn shadow-0"
                    style="background-color: #131921; color: white; font-weight: bolder; border-radius: 30px; height: 40px;"
                    data-product-id="<%= products._id %>">
                    <i class="me-1 fa fa-shopping-basket"></i> Add to Cart
                 </a>
                   <% }else{ %>
                      <!-- User is not logged in, show the Buy Now button with a centered modal -->
                      <button type="button" class="btn shadow-0"
                        style="background-color: #131921; color: white; font-weight: bolder; border-radius: 30px; height: 40px;"
                        data-bs-toggle="modal" data-bs-target="#loginModal">
                        Add To cart
                      </button>
                      <% } %>
                      <!-- Modal -->
                      <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="loginModalLabel">Login Required</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                            </div>
                            <div class="modal-body" style="display: flex; justify-content: center;">
                              <p>Please log in to make a purchase.</p>
                              <!-- You can add more information or instructions here -->
                            </div>
                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                                style="color:white; background-color: #131921">Close</button>
                              <a href="/login"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                                  style="color: #131921; background-color: #FFA530;">Login</button></a>
                              <!-- You can add additional buttons or actions here -->
                            </div>
                          </div>
                        </div>
                      </div>
                     

                        <% if(users) {%>
                          <!-- User is logged in, show the Buy Now form -->
                          <a href="#"    class="btn add-to-wishList-btn shadow-0 btn-light border border-secondary py-2 icon-hover px-3"
                          data-product-id="<%= products._id %>">
                          <i class="me-1 fa fa-heart fa-lg"></i> Add to Wishlist
                       </a>
                         <% }else{ %>
                            <!-- User is not logged in, show the Buy Now button with a centered modal -->
                            <a href="" class="btn btn-light border border-secondary py-2 icon-hover px-3"
                              data-bs-toggle="modal" data-bs-target="#loginModal">
                              <i class="me-1 fa fa-heart fa-lg"></i> Wishlist
                            </a>
                            <% } %>
                            <!-- Modal -->
                            
                            <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel"
                              aria-hidden="true">
                              <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content">
                                  <div class="modal-header">
                                    <h5 class="modal-title" id="loginModalLabel">Login Required</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                      aria-label="Close"></button>
                                  </div>
                                  <div class="modal-body" style="display: flex; justify-content: center;">
                                    <p>Please log in to make a purchase.</p>
                                    <!-- You can add more information or instructions here -->
                                  </div>
                                  <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                                      style="color:white; background-color: #131921">Close</button>
                                    <a href="/login"><button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal"
                                        style="color: #131921; background-color: #FFA530;">Login</button></a>
                                    <!-- You can add additional buttons or actions here -->
                                  </div>
                                </div>
                              </div>
                            </div>
                           







          </div>
        </main>
      </div>
    </div>
  </section>
  <!-- content -->

  <section class="bg-light border-top py-4">
    <div class="container">
      <div class="row gx-4">
        <div class="col-lg-8 mb-4">
          <div class="border rounded-2 px-3 py-2 bg-white">
            <!-- Pills navs -->
            <ul class="nav nav-pills nav-justified mb-3" id="ex1" role="tablist">
              <li class="nav-item d-flex" role="presentation">
                <a class="nav-link d-flex align-items-center justify-content-center w-100 active" id="ex1-tab-1"
                  data-mdb-toggle="pill" href="#ex1-pills-1" role="tab" aria-controls="ex1-pills-1"
                  aria-selected="true">Specification</a>
              </li>
              <li class="nav-item d-flex" role="presentation">
                <a class="nav-link d-flex align-items-center justify-content-center w-100" id="ex1-tab-2"
                  data-mdb-toggle="pill" href="#ex1-pills-2" role="tab" aria-controls="ex1-pills-2"
                  aria-selected="false">Shipping info</a>
              </li>
              <li class="nav-item d-flex" role="presentation">
                <a class="nav-link d-flex align-items-center justify-content-center w-100" id="ex1-tab-3"
                  data-mdb-toggle="pill" href="#ex1-pills-3" role="tab" aria-controls="ex1-pills-3"
                  aria-selected="false">Return policy</a>
              </li>
              <li class="nav-item d-flex" role="presentation">
                <a class="nav-link d-flex align-items-center justify-content-center w-100" id="ex1-tab-4"
                  data-mdb-toggle="pill" href="#ex1-pills-4" role="tab" aria-controls="ex1-pills-4"
                  aria-selected="false">Seller profile</a>
              </li>
            </ul>
            <!-- Pills navs -->

            <!-- Pills content -->
            <div class="tab-content" id="ex1-content">
              <div class="tab-pane fade show active" id="ex1-pills-1" role="tabpanel" aria-labelledby="ex1-tab-1">
                <div class="container">
                 
                    <a style="cursor: pointer;text-decoration: underline;">Write a review</a>
                     
                        <!-- <button class="btn-rounded btn" style="background-color:#FFA530; color: black;" data-bs-toggle="modal" data-bs-target="#loginModal">write a 
                          Review</button> -->
                          <a  style="cursor: pointer;text-decoration: underline;" data-bs-toggle="modal" data-bs-target="#loginModal">Write a review</a>
                        
                </div>
                
                <div id="review-box">
                  
                  <div class="review mt-3">
                      <h6></h6>
                      <h1></h1>
                      <h6 style="font-size: smaller;">
                       
                        <span style="font-weight: 400;">on</span> 
                      </h6>
                  </div>
                  <hr>
                  
          
                
          
                  
              </div>


              </div>
              <div class="tab-pane fade mb-2" id="ex1-pills-2" role="tabpanel" aria-labelledby="ex1-tab-2">
                Delivery available in all Pincodes.<br/>
Delivery Time<br/>
- 3 to 7 working Days.<br/>
Note: This product is "make to order" product and It will take 7 to 10 extra working days to manufacture and ship it.<br/>

              </div>
              <div class="tab-pane fade mb-2" id="ex1-pills-3" role="tabpanel" aria-labelledby="ex1-tab-3">
                Suits, Blazers and Sherwani are non-refundable products. We do not offer cash refunds for these items. However, customers have the option to exchange their Suits, Blazers or Sherwani for a different size, color, or style within 14 days of receiving the order, outfits must be in its original, unused condition with all tags attached. Alternatively, customers may opt for a credit wallet, where the equivalent purchase amount will be credited for future use on our website. Exchange requests must be initiated within 14 days of receiving the order, and the credit wallet option is available for the equivalent purchase amount. This policy is specific to Suits, Blazers and Sherwani and is subject to our general terms and conditions.
              </div>
              <div class="tab-pane fade mb-2" id="ex1-pills-4" role="tabpanel" aria-labelledby="ex1-tab-4">
                US Company Name: TEXFC LLC <br/>
Registered US Office Address: 293 Whitehead Road, STE 10259, Hamilton, New Jersey 08619, United States.<br>
India Company Name: French Crown Pvt Ltd <br/>
Registered India Office Address: 3001 AB, 3002 AB, RRTM PHASE 2 (India’s largest textile mall) Canal Road, Opposite Orbit 2, Saroli, Surat, Pincode - 395010, Gujarat, India
Warehouses <br/>
US warehouse address: 7063 Clubview Drive, Bridgeville, PA - 15017, United States.<br/>
UK warehouse address: Unit 2a, 6 Greycaine Road, Watford WD24 7GP, United Kingdom.<br/>
Canadian warehouse address: Unit 1110, 1275 Richmond road, K2B 8E3, Ottawa ON, Canada.<br/>
Australian warehouse address1: 522 bridge road, para hill west, Adelaide - 5096 , South Australia, Australia <br/>
Australian warehouse address2: Unit 1/ 126 Vernon St, Nundah 4012, Queensland, Australia <br/>
Indian warehouse address: 3001 AB, 3002 AB, RRTM PHASE 2 (India’s largest textile mall) Canal Road, Opposite Orbit 2, Saroli, Surat, Pincode - 395010, Gujarat, India
              </div>
            </div>
            <!-- Pills content -->
          </div>
        </div>

      </div>
    </div>
  </section>
  <!-- Add this at the end of your body -->
  <div class="modal fade" id="verificationModal" tabindex="-1" aria-labelledby="verificationModalLabel"
    aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="verificationModalLabel">Account Verification</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>You need to verify your account before adding items to the cart.</p>
          <!-- You can add more information or instructions here -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <!-- You can add additional buttons or actions here -->
        </div>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
  const thumbnails = document.querySelectorAll('.thumbnail-link');
  const largeImageLink = document.getElementById('largeImageLink');
  const largeImage = document.getElementById('largeImage');

  thumbnails.forEach(thumbnail => {
    thumbnail.addEventListener('click', function (event) {
      event.preventDefault(); // Prevent default behavior of anchor tag

      const index = this.getAttribute('data-index');
      const imageURL = this.getAttribute('href');

      // Set large image attributes
      largeImageLink.setAttribute('href', imageURL);
      largeImage.setAttribute('src', imageURL);
      largeImage.setAttribute('data-magnify-src', imageURL);
    });
  });
});

</script>

<script>
 document.addEventListener('DOMContentLoaded', function () {
      const addToCart = document.querySelectorAll('.add-to-cart-btn');
  
      addToCart.forEach(addToCart => {
        addToCart.addEventListener('click', function () {
          // Retrieve product ID from the button's dataset
          const productId = this.dataset.productId;
  
          // Send a POST request to the backend route to add the product to the cart
          fetch('/addToCart', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ productId }) // Include productId in the request body
          })
          .then(response => response.json())
          .then(data => {
            if (data.success) {
              // Product successfully added to cart, show success alert
              Swal.fire({
                icon: 'success',
                title: 'Success',
                text: 'Product added to cart successfully'
              }).then((result) => {
                if (result.isConfirmed) {
                  location.reload();
                }
              });
            } else {
              // Product is already added to cart, show error alert
              Swal.fire({
                icon: 'error',
                title: 'Oops...',
                text: 'Product is already in cart'
              });
            }
          })
          .catch(error => {
            console.error('Error adding product to cart:', error);
            // Handle error response
            Swal.fire({
              icon: 'error',
              title: 'Oops...',
              text: 'Something went wrong!'
            });
          });
        });
      });
    });
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const addToWishListButtons = document.querySelectorAll('.add-to-wishList-btn');

    addToWishListButtons.forEach(addToWishListButtons => {
      addToWishListButtons.addEventListener('click', function () {
        // Retrieve product ID from the button's dataset
        const productId = this.dataset.productId;

        // Send a POST request to the backend route to add the product to the cart
        fetch('/addToWishList', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ productId }) // Include productId in the request body
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            // Product successfully added to cart, show success alert
            Swal.fire({
              icon: 'success',
              title: 'Success',
              text: 'Product added to wishList successfully'
            }).then((result) => {
              if (result.isConfirmed) {
                window.location.href = '/product-Details?id=' + productId;
              }
            });
          } else {
            // Product is already added to cart, show error alert
            Swal.fire({
              icon: 'error',
              title: 'Oops...',
              text: 'Product is already in wishList'
            });
          }
        })
        .catch(error => {
          console.error('Error adding product to wishList:', error);
          // Handle error response
          Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'Something went wrong!'
          });
        });
      });
    });
  });
</script>

  <%- include('include/footer') %>